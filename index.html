<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Roulette</title>
  </head>
  <body>
    <div style="display:flex;justify-content:center;align-items: center;">
      <h2>You rolled on: </h2>
      <div style="border: 2px solid; width: 200px; height: 30px; text-align: center;" id="result"></div>
    </div>
    <div style="display:flex;justify-content: center;align-items: center;">
      <div>
        <div id="roulette-image"></div>
        <button id="start-image" style="margin:auto;display:block;">start</button>
      </div>

    <div style="display:flex;justify-content: space-evenly;align-items: center;">
      
    </div>
    <script type="module">
      import Roulette from './src/index.ts';
      import axios from 'axios';
    
      const img = new Image();
      img.src = 'https://images.vexels.com/media/users/3/151205/isolated/preview/8857efb275fbf2435db40a222d05b1e6-roulette-wheel-icon.png';
      
      const rouletteImage = new Roulette({
        container: 'roulette-image',
        board: {
          element: img,
          padding: 10,
        },
        sections: [0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26],
        colors: ["#AAD7D9", "#FBF9F1", "#E5E1DA"],
        settings: {},
      });
    
      const resultElem = document.getElementById('result');
    
      function onstart() {
        resultElem.innerHTML = '';
      }
    
      rouletteImage.onstart = onstart;
    
      function onstop(result) {
        resultElem.innerHTML = result.value;
      }
    
      rouletteImage.onstop = onstop;
    
      document.getElementById('start-image').addEventListener('click', async () => {
        const { promise, resolve, reject } = Promise.withResolvers();
        rouletteImage.asyncRollByIndex(promise);
    // tutorial to impliment: https://medium.com/@marketing.blockchain/how-to-use-a-web3js-call-contract-function-138eda3d3d15
        // Make an API call to get the roll index
        try {
          const res = await axios.get('your_path'); // Replace 'your_path' with your actual API endpoint
          resolve(res.data.rollIndex); // Assuming your API returns an object with a rollIndex property
        } catch (error) {
          reject(error);
          console.error(error); // Handle the error accordingly
        }
      });
    </script>
    
  </body>
</html>